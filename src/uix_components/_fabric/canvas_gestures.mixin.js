!function(){var e=fabric.util.degreesToRadians,t=fabric.util.radiansToDegrees;fabric.util.object.extend(fabric.Canvas.prototype,{__onTransformGesture:function(e,t){if(!this.isDrawingMode&&e.touches&&2===e.touches.length&&"gesture"===t.gesture){var r=this.findTarget(e);void 0!==r&&(this.__gesturesParams={e:e,self:t,target:r},this.__gesturesRenderer()),this.fire("touch:gesture",{target:r,e:e,self:t})}},__gesturesParams:null,__gesturesRenderer:function(){if(null!==this.__gesturesParams&&null!==this._currentTransform){var e=this.__gesturesParams.self,t=this._currentTransform,r=this.__gesturesParams.e;t.action="scale",t.originX=t.originY="center",this._setOriginToCenter(t.target),this._scaleObjectBy(e.scale,r),0!==e.rotation&&(t.action="rotate",this._rotateObjectByAngle(e.rotation,r)),this._setCenterToOrigin(t.target),this.renderAll(),t.action="drag"}},__onDrag:function(e,t){this.fire("touch:drag",{e:e,self:t})},__onOrientationChange:function(e,t){this.fire("touch:orientation",{e:e,self:t})},__onShake:function(e,t){this.fire("touch:shake",{e:e,self:t})},__onLongPress:function(e,t){this.fire("touch:longpress",{e:e,self:t})},_scaleObjectBy:function(e,t){var r=this._currentTransform,i=r.target,n=i.get("lockScalingX"),s=i.get("lockScalingY");if(!n||!s){i._scaling=!0;var a=i.translateToOriginPoint(i.getCenterPoint(),r.originX,r.originY),o=i._getTransformedDimensions();this._setObjectScale(new fabric.Point(r.scaleX*o.x*e/i.scaleX,r.scaleY*o.y*e/i.scaleY),r,n,s,null,i.get("lockScalingFlip"),o),i.setPositionByOrigin(a,r.originX,r.originY),this._fire("scaling",i,t)}},_rotateObjectByAngle:function(r,i){var n=this._currentTransform;!n.target.get("lockRotation")&&(n.target.angle=t(e(r)+n.theta),this._fire("rotating",n.target,i))}})}();